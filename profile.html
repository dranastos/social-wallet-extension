<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Configuration - Zap Social</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="profile.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="zap-icon">‚ö°</div>
                <h1>Profile Configuration</h1>
            </div>
            <p class="subtitle">Edit your NOSTR identity details</p>
        </div>

        <div class="content">
            <div id="no-identity" class="section">
                <div class="identity-setup">
                    <div class="zap-icon large">‚ö°</div>
                    <h2>Setup NOSTR Identity</h2>
                    <p>Choose how you want to setup your NOSTR identity:</p>
                    
                    <div class="identity-options">
                        <div class="option-card">
                            <div class="option-icon">üîë</div>
                            <h3>Import Existing Key</h3>
                            <p>Import your existing NOSTR private key</p>
                            <button id="import-key-btn" class="btn btn-primary">Import Key</button>
                        </div>
                        
                        <div class="option-card">
                            <div class="option-icon">‚ú®</div>
                            <h3>Generate New Identity</h3>
                            <p>Create a fresh NOSTR identity</p>
                            <button id="generate-key-btn" class="btn btn-primary">Generate New</button>
                        </div>
                    </div>
                    
                    <!-- Import Key Form -->
                    <div id="import-form" class="import-form hidden">
                        <h3>Import Private Key</h3>
                        <div class="input-group">
                            <label for="private-key-input">Private Key (hex format)</label>
                            <textarea id="private-key-input" placeholder="Enter your NOSTR private key in hex format..." rows="3"></textarea>
                            <div class="validation-message"></div>
                            <div class="help-text">Your private key should be 64 hex characters</div>
                        </div>
                        <div class="form-actions">
                            <button id="import-confirm-btn" class="btn btn-primary">Import & Setup Profile</button>
                            <button id="import-cancel-btn" class="btn btn-secondary">Cancel</button>
                        </div>
                    </div>
                    
                    <!-- Generate Progress -->
                    <div id="generate-progress" class="generate-progress hidden">
                        <h3>Generating Identity...</h3>
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <p class="progress-text">Creating your new NOSTR identity...</p>
                    </div>
                    
                    <!-- Identity Preview -->
                    <div id="identity-preview" class="identity-preview hidden">
                        <h3>Identity Created</h3>
                        <div class="key-info">
                            <div class="key-item">
                                <label>Public Key (npub):</label>
                                <div class="key-value" id="public-key-display"></div>
                            </div>
                            <div class="key-item">
                                <label>Private Key (nsec):</label>
                                <div class="key-value private-key" id="private-key-display">
                                    <span class="key-hidden">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                                    <button class="btn-reveal" id="reveal-key-btn">üëÅÔ∏è</button>
                                </div>
                            </div>
                        </div>
                        <div class="warning-box">
                            <span class="warning-icon">‚ö†Ô∏è</span>
                            <p><strong>Important:</strong> Save your private key somewhere safe! You'll need it to access your identity on other devices.</p>
                        </div>
                        <div class="form-actions">
                            <button id="continue-setup-btn" class="btn btn-primary">Continue to Profile Setup</button>
                            <button id="copy-keys-btn" class="btn btn-secondary">Copy Keys to Clipboard</button>
                        </div>
                    </div>
                    
                    <div class="back-option">
                        <button id="back-to-popup" class="btn btn-link">‚Üê Back to Main Page</button>
                    </div>
                </div>
            </div>

            <div id="profile-editor" class="section hidden">
                <div class="profile-container">
                    <!-- Form Section -->
                    <div class="form-section">
                        <h2>Profile Information</h2>
                        
                        <form id="profile-form" class="profile-form">
                            <div class="input-group">
                                <label for="display-name">Display Name</label>
                                <input type="text" id="display-name" name="name" placeholder="Your display name" maxlength="50">
                                <div class="validation-message"></div>
                            </div>

                            <div class="input-group">
                                <label for="about">About / Bio</label>
                                <textarea id="about" name="about" placeholder="Tell people about yourself..." maxlength="500" rows="3"></textarea>
                                <div class="char-count"><span class="current">0</span> / 500</div>
                                <div class="validation-message"></div>
                            </div>

                            <div class="input-group">
                                <label for="picture">Profile Picture</label>
                                <div class="picture-upload-section">
                                    <input type="file" id="picture-file" name="pictureFile" accept="image/*" class="file-input">
                                    <button type="button" id="upload-picture-btn" class="btn btn-upload">Choose Image</button>
                                    <span id="picture-filename" class="filename-display">No file chosen</span>
                                </div>
                                <div class="upload-preview">
                                    <img id="picture-preview" class="preview-img hidden" alt="Profile picture preview">
                                </div>
                                <input type="url" id="picture" name="picture" placeholder="Or enter image URL" class="url-fallback">
                                <div class="validation-message"></div>
                                <div class="help-text">Upload an image file or enter a URL</div>
                            </div>

                            <div class="input-group">
                                <label for="banner">Banner Image URL</label>
                                <input type="url" id="banner" name="banner" placeholder="https://yourdomain.com/banner.jpg">
                                <div class="validation-message"></div>
                            </div>

                            <div class="input-group">
                                <label for="nip05">NIP-05 Identifier</label>
                                <input type="email" id="nip05" name="nip05" placeholder="yourname@yourdomain.com">
                                <div class="validation-message"></div>
                                <div class="help-text">Your verified NOSTR identifier (like an email)</div>
                            </div>

                            <div class="input-group">
                                <label for="base-addr">Base/Ethereum Address</label>
                                <input type="text" id="base-addr" name="baseAddr" placeholder="0xYourEthereumOrBaseAddress">
                                <div class="validation-message"></div>
                                <div class="help-text">Your Ethereum or Base blockchain address</div>
                            </div>

                            <div class="form-actions">
                                <button type="button" id="save-profile" class="btn btn-primary">Save Profile</button>
                                <button type="button" id="reset-form" class="btn btn-secondary">Reset</button>
                                <button type="button" id="back-to-main" class="btn btn-secondary">Back to Main</button>
                            </div>
                        </form>
                    </div>

                    <!-- Preview Section -->
                    <div class="preview-section">
                        <h2>Live Preview</h2>
                        <div class="profile-preview">
                            <div class="preview-banner">
                                <img id="preview-banner-img" src="" alt="" class="banner-img hidden">
                                <div class="banner-placeholder">Banner Image</div>
                            </div>
                            
                            <div class="preview-content">
                                <div class="profile-header">
                                    <div class="avatar-container">
                                        <img id="preview-avatar-img" src="" alt="" class="avatar-img hidden">
                                        <div class="avatar-placeholder">üë§</div>
                                    </div>
                                    
                                    <div class="profile-info">
                                        <h3 id="preview-name" class="profile-name">Display Name</h3>
                                        <p id="preview-nip05" class="profile-identifier hidden"></p>
                                    </div>
                                </div>
                                
                                <div class="profile-bio">
                                    <p id="preview-about">Your bio will appear here...</p>
                                </div>
                                
                                <div class="profile-addresses">
                                    <div id="preview-base" class="address-item hidden">
                                        <span class="address-icon">üîó</span>
                                        <span class="address-text"></span>
                                    </div>
                                </div>
                                
                                <div class="verification-status">
                                    <div id="nip05-status" class="verification-item hidden">
                                        <span class="verification-icon">‚è≥</span>
                                        <span class="verification-text">Checking NIP-05...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="status-section">
                <div id="status-indicator" class="status">
                    <span class="status-dot"></span>
                    <span id="status-text">Ready</span>
                </div>
            </div>
        </div>
    </div>

    <script src="nostr-utils.js"></script>
    <script src="profile.js"></script>
</body>
</html>
